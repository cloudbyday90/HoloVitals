{'role': 'assistant', 'content': '<function_calls>\n<str-replace file_path="medical-analysis-platform/prisma/schema.prisma">\n<old_str>  model CloudInstance {\n    id           String   @id @default(cuid())\n    \n    provider     String\n    region       String\n    instanceType String\n    instanceId   String   @unique\n    \n    model        String\n    \n    status       String   @default("provisioning")\n    \n    createdAt    DateTime @default(now())\n    readyAt      DateTime?\n    terminatedAt DateTime?\n    \n    costPerMinute Float\n    totalCost     Float   @default(0)\n    \n    tasks        AnalysisQueue[]\n    \n    metadata     Json?\n    \n    @@index([status])\n    @@index([createdAt])\n    @@index([provider, region])\n    @@map("cloud_instances")\n  }</old_str>\n<new_str>  model CloudInstance {\n    id                  String    @id @default(cuid())\n    userId              String\n    user                User      @relation(fields: [userId], references: [id], onDelete: Cascade)\n    \n    taskId              String?\n    task                AnalysisTask? @relation(fields: [taskId], references: [id], onDelete: SetNull)\n    \n    // Cloud provider details\n    provider            String    // AZURE, AWS, GCP\n    instanceType        String    // e.g., Standard_NC6, p2.xlarge\n    region              String    // e.g., eastus, us-east-1\n    cloudInstanceId     String?   // Provider-specific instance ID\n    \n    // Network details\n    publicIp            String?\n    privateIp           String?\n    \n    // Status and lifecycle\n    status              String    // PROVISIONING, CONFIGURING, READY, RUNNING, STOPPING, TERMINATED, FAILED\n    \n    // Configuration\n    diskSizeGB          Int       @default(100)\n    autoTerminateMinutes Int      @default(60)\n    \n    // Cost tracking\n    costPerHour         Float\n    totalCost           Float     @default(0)\n    \n    // Purpose and metadata\n    purpose             String?\n    metadata            Json?\n    \n    // Legacy fields for compatibility\n    tasks               AnalysisQueue[]\n    \n    // Timestamps\n    createdAt           DateTime  @default(now())\n    terminatedAt        DateTime?\n    updatedAt           DateTime  @updatedAt\n    \n    @@index([userId])\n    @@index([taskId])\n    @@index([status])\n    @@index([provider])\n    @@index([createdAt])\n    @@map("cloud_instances")\n  }</new_str>\n</str-replace>\n</function_calls>'}