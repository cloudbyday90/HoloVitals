{'role': 'assistant', 'content': '<function_calls>\n<str-replace file_path="todo.md">\n<old_str>## Phase 2b: Allscripts-Specific Features (Current) ðŸ”„ IN PROGRESS\n\n### 2.1 Epic-Specific Resource Types [x]</old_str>\n<new_str>## Phase 2b: Allscripts-Specific Features (Current) ðŸ”„ IN PROGRESS\n\n### 2b.1 Allscripts-Specific Resource Types [ ]\n- [ ] Implement DiagnosticReport support (lab results, imaging reports)\n- [ ] Implement CarePlan support (treatment plans, care coordination)\n- [ ] Implement Encounter support (visits, appointments, hospitalizations)\n- [ ] Implement Goal support (patient health goals)\n- [ ] Implement ServiceRequest support (orders, referrals)\n- [ ] Add Allscripts-specific extensions handling\n\n### 2b.2 Allscripts Bulk Data Export [ ]\n- [ ] Implement FHIR Bulk Data Export ($export operation)\n- [ ] Support Patient-level export\n- [ ] Handle NDJSON format parsing\n- [ ] Implement polling for export completion\n- [ ] Download and process export files\n\n### 2b.3 FollowMyHealth Integration [ ]\n- [ ] Research FollowMyHealth API requirements\n- [ ] Document production app registration process\n- [ ] Create Allscripts-specific configuration guide\n- [ ] Add FollowMyHealth metadata\n\n### 2b.4 Allscripts-Specific Optimizations [ ]\n- [ ] Implement Allscripts preferred search parameters\n- [ ] Add Allscripts-specific rate limiting\n- [ ] Optimize pagination for Allscripts response sizes\n- [ ] Handle Allscripts-specific error codes\n- [ ] Implement Allscripts recommended retry logic\n\n### 2b.5 Enhanced Data Extraction [ ]\n- [ ] Extract clinical notes from DiagnosticReport\n- [ ] Parse lab results with reference ranges\n- [ ] Extract imaging study metadata\n- [ ] Process care plan activities and goals\n- [ ] Extract encounter diagnoses and procedures\n\n### 2b.6 Allscripts Service Extensions [ ]\n- [ ] Create AllscriptsEnhancedService extending EHRSyncService\n- [ ] Add bulk export methods\n- [ ] Add enhanced resource fetching\n- [ ] Add Allscripts-specific data transformations\n\n### 2b.7 API Endpoints [ ]\n- [ ] POST /api/ehr/allscripts/bulk-export - Initiate bulk export\n- [ ] GET /api/ehr/allscripts/bulk-export/:id - Check export status\n- [ ] POST /api/ehr/allscripts/enhanced-sync - Enhanced sync with all resources\n- [ ] GET /api/ehr/allscripts/capabilities - Get Allscripts-specific capabilities\n\n### 2b.8 Database Schema Updates [ ]\n- [ ] Verify bulk_export_jobs table supports Allscripts\n- [ ] Add allscripts_specific_data table for extensions\n- [ ] Update fhir_resources table with Allscripts-specific fields\n- [ ] Add indexes for Allscripts-specific queries\n\n### 2b.9 Documentation [ ]\n- [ ] Create ALLSCRIPTS_INTEGRATION.md guide\n- [ ] Document bulk export process\n- [ ] Document FollowMyHealth registration\n- [ ] Add Allscripts-specific examples\n- [ ] Create troubleshooting guide\n\n## Success Criteria for Phase 2b (Allscripts-Specific)\n- [ ] All Allscripts-specific resource types supported\n- [ ] Bulk export fully functional\n- [ ] Enhanced data extraction working\n- [ ] All tests passing\n- [ ] Complete documentation\n- [ ] Production-ready code\n\n## Estimated Time for Phase 2b: 1 week\n\n---\n\n### 2.1 Epic-Specific Resource Types [x]</new_str>\n</str-replace>\n</function_calls>'}