{'role': 'assistant', 'content': '<function_calls>\n<create-file file_path="medical-analysis-platform/app/api/admin/errors/alerts/route.ts">\n/**\n * Error Alerts API\n * OWNER/ADMIN only - Get alert statistics and manage alerts\n */\n\nimport { NextRequest, NextResponse } from \'next/server\';\nimport { requireAdmin } from \'@/lib/middleware/auth\';\nimport { errorAlertService } from \'@/lib/services/ErrorAlertService\';\n\nexport async function GET(req: NextRequest) {\n  // Protect endpoint - ADMIN or higher\n  const user = await requireAdmin(req);\n  if (user instanceof NextResponse) {\n    return user;\n  }\n\n  try {\n    const { searchParams } = new URL(req.url);\n    const hours = parseInt(searchParams.get(\'hours\') || \'24\');\n\n    // Get alert statistics\n    const stats = await errorAlertService.getAlertStats(hours);\n\n    return NextResponse.json(stats);\n  } catch (error) {\n    console.error(\'Failed to get alert stats:\', error);\n    return NextResponse.json(\n      { error: \'Failed to get alert statistics\' },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function POST(req: NextRequest) {\n  // Protect endpoint - ADMIN or higher\n  const user = await requireAdmin(req);\n  if (user instanceof NextResponse) {\n    return user;\n  }\n\n  try {\n    const body = await req.json();\n    const { action, config } = body;\n\n    if (action === \'configure\') {\n      // Update alert configuration\n      errorAlertService.configure(config);\n      return NextResponse.json({ success: true });\n    }\n\n    return NextResponse.json(\n      { error: \'Invalid action\' },\n      { status: 400 }\n    );\n  } catch (error) {\n    console.error(\'Failed to update alert config:\', error);\n    return NextResponse.json(\n      { error: \'Failed to update alert configuration\' },\n      { status: 500 }\n    );\n  }\n}\n</create-file>\n</function_calls>'}