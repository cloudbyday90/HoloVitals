# HoloVitals v1.4.9 Quick Reference Card

## 🚀 One-Line Installation

```bash
wget https://raw.githubusercontent.com/cloudbyday90/HoloVitals/main/scripts/install-v1.4.9.sh && chmod +x install-v1.4.9.sh && ./install-v1.4.9.sh
```

---

## 📋 What's New in v1.4.9

**Bug Fix Release** - Corrects v1.4.8 Cloudflare Tunnel handling

### Fixed
- ✅ Cloudflare Tunnel now configured in development mode
- ✅ Only Stripe is optional in development (not Cloudflare)
- ✅ Both dev and prod use Cloudflare Tunnel + nginx

---

## 🔧 Installation Requirements

### Required for Both Dev & Prod
- Git, Node.js, npm
- GitHub Personal Access Token
- **Cloudflare Tunnel token** ⚠️
- PostgreSQL database
- OpenAI API key
- SMTP credentials

### Production Only
- Stripe API keys (live payments)

### Development Optional
- Stripe test keys (UI testing only)

---

## 🎯 Installation Types

### Development Mode
```
✅ Cloudflare Tunnel: Required
✅ nginx: Required
⚠️ Stripe: Optional (UI only)
📝 Start: npm run dev
```

### Production Mode
```
✅ Cloudflare Tunnel: Required
✅ nginx: Required
✅ Stripe: Required (live payments)
📝 Start: npm run start
```

---

## 📦 Installation Phases

1. ✅ Prerequisites Check
2. ✅ Repository Setup (with GitHub PAT)
3. ✅ Dependencies (1016 packages)
4. ✅ Environment Configuration
5. ✅ Prisma Client Generation
6. ✅ **Cloudflare Tunnel Setup** (both modes)
7. ✅ Application Build

---

## ⚙️ Post-Installation

### 1. Update .env.local
```bash
cd ~/HoloVitals/medical-analysis-platform
nano .env.local
```

**Required:**
- OPENAI_API_KEY
- SMTP credentials

**Production:**
- STRIPE_SECRET_KEY
- NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY
- STRIPE_WEBHOOK_SECRET

### 2. Setup Database
```bash
sudo -u postgres psql
CREATE DATABASE holovitals;
CREATE USER holovitals WITH PASSWORD 'password';
GRANT ALL PRIVILEGES ON DATABASE holovitals TO holovitals;
\q
```

### 3. Run Migrations
```bash
npx prisma migrate deploy
```

### 4. Start Application
```bash
# Development
npm run dev

# Production
npm run start
```

---

## 🔍 Quick Verification

```bash
# Check Cloudflare Tunnel
systemctl status cloudflared

# Test application
curl https://your-domain.com

# View logs
sudo journalctl -u cloudflared -f
```

---

## 🆘 Quick Troubleshooting

### Cloudflare Tunnel Issues
```bash
sudo systemctl restart cloudflared
sudo journalctl -u cloudflared -f
```

### Application Issues
```bash
cd ~/HoloVitals/medical-analysis-platform
npm run dev  # Check for errors
cat .env.local  # Verify config
```

### Database Issues
```bash
npx prisma db pull  # Test connection
npx prisma studio  # Open database GUI
```

---

## 📊 Key Differences: v1.4.8 vs v1.4.9

| Feature | v1.4.8 (Bug) | v1.4.9 (Fixed) |
|---------|--------------|----------------|
| Dev: Cloudflare | ❌ Skipped | ✅ Required |
| Dev: nginx | ❌ Skipped | ✅ Required |
| Dev: Stripe | ❌ Skipped | ⚠️ Optional |
| Prod: All | ✅ Required | ✅ Required |

---

## 🔄 Upgrading from v1.4.8

```bash
# Run new installer
wget https://raw.githubusercontent.com/cloudbyday90/HoloVitals/main/scripts/install-v1.4.9.sh && chmod +x install-v1.4.9.sh && ./install-v1.4.9.sh

# Provide Cloudflare Tunnel token when prompted
# Installer will configure everything automatically
```

---

## 📝 Environment Variables

### Development (.env.local)
```bash
NODE_ENV=development
NEXTAUTH_URL="https://your-domain.com"
DATABASE_URL="postgresql://..."

# Stripe (Optional - commented out)
# STRIPE_SECRET_KEY=sk_test_...
# NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_...

# Required
OPENAI_API_KEY=sk-...
SMTP_HOST=smtp.gmail.com
```

### Production (.env.local)
```bash
NODE_ENV=production
NEXTAUTH_URL="https://your-domain.com"
DATABASE_URL="postgresql://..."

# Stripe (Required)
STRIPE_SECRET_KEY=sk_live_...
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_live_...
STRIPE_WEBHOOK_SECRET=whsec_...

# Required
OPENAI_API_KEY=sk-...
SMTP_HOST=smtp.gmail.com
```

---

## 🎯 Critical Points

1. **Cloudflare Tunnel is NOT optional** - required for both dev and prod
2. **nginx is required** for both modes
3. **Only Stripe is optional** in development (for UI testing)
4. Development uses `npm run dev`, production uses `npm run start`

---

## 📚 Documentation

- **Full Release Notes**: RELEASE_NOTES_V1.4.9.md
- **Changelog**: CHANGELOG_V1.4.9.md
- **GitHub**: https://github.com/cloudbyday90/HoloVitals
- **Issues**: https://github.com/cloudbyday90/HoloVitals/issues

---

## 🔗 Quick Links

- **Installation Script**: https://raw.githubusercontent.com/cloudbyday90/HoloVitals/main/scripts/install-v1.4.9.sh
- **GitHub Release**: https://github.com/cloudbyday90/HoloVitals/releases/tag/v1.4.9
- **Create PAT**: https://github.com/settings/tokens

---

## ✅ Installation Checklist

- [ ] GitHub PAT created
- [ ] Cloudflare Tunnel token ready
- [ ] Domain name configured
- [ ] PostgreSQL installed
- [ ] Run installation script
- [ ] Update .env.local with API keys
- [ ] Create database
- [ ] Run migrations
- [ ] Start application
- [ ] Verify Cloudflare Tunnel
- [ ] Test application access

---

**Version**: 1.4.9  
**Release Date**: January 4, 2025  
**Type**: Bug Fix Release  
**Previous**: v1.4.8